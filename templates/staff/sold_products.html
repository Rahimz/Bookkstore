{% extends "_base.html" %}

{% load i18n %}

{% load static %}

{% block title %}{% trans 'Sold products' %}{% endblock %}

{% block warehouses-btn %}btn-secondary text-dark{% endblock %}

{% block content %}
<div class="container-fluid overflow-hidden">
  <div class="row">
    <div class="col-md-2">
      {% include "staff/sidebar_staff.html" with barName="warehouse" %}
    </div>
    <div class="col-md-10">
      <h2>{% trans 'Sold products'%} {% if fa_date%}: {{ fa_date }}{% endif %}</h2>
      <!-- Export to excel -->
      <p class="my-3">
        {% if date %}
        <a href="{% url 'tools:export_excel_sold_products_date' date=date %}" class="my-2">
          <img src="{% static 'img/excel-icon.png' %}" alt="Excel icon" width="32px" height="auto">
          <span>{{ fa_date }}</span>
        </a>
        {% else %}
        <a href="{% url 'tools:export_excel_sold_products' days=days %}" class="my-2">
          <img src="{% static 'img/excel-icon.png' %}" alt="Excel icon" width="32px" height="auto">
          <span>{% trans 'Last year'%}</span>
        </a>
        {% endif %}
      </p>
      <!-- Choose date -->
      <p>
        {% trans 'Esfand' %}:
        <a href="{% url 'staff:sold_products_date' date='20032022' %}" class="btn btn-sm btn-outline-secondary">29</a>
        <a href="{% url 'staff:sold_products_date' date='19032022' %}" class="btn btn-sm btn-outline-secondary">28</a>
        <a href="{% url 'staff:sold_products_date' date='18032022' %}" class="btn btn-sm btn-outline-secondary">27</a>
        <a href="{% url 'staff:sold_products_date' date='17032022' %}" class="btn btn-sm btn-outline-secondary">26</a>
        <a href="{% url 'staff:sold_products_date' date='16032022' %}" class="btn btn-sm btn-outline-secondary">25</a>
        <a href="{% url 'staff:sold_products_date' date='15032022' %}" class="btn btn-sm btn-outline-secondary">24</a>
        <a href="{% url 'staff:sold_products_date' date='14032022' %}" class="btn btn-sm btn-outline-secondary">23</a>
        <a href="{% url 'staff:sold_products_date' date='13032022' %}" class="btn btn-sm btn-outline-secondary">22</a>
        <a href="{% url 'staff:sold_products_date' date='12032022' %}" class="btn btn-sm btn-outline-secondary">21</a>
        <a href="{% url 'staff:sold_products_date' date='11032022' %}" class="btn btn-sm btn-outline-secondary">20</a>
        <a href="{% url 'staff:sold_products_date' date='10032022' %}" class="btn btn-sm btn-outline-secondary">19</a>
        <a href="{% url 'staff:sold_products_date' date='09032022' %}" class="btn btn-sm btn-outline-secondary">18</a>
        <a href="{% url 'staff:sold_products_date' date='08032022' %}" class="btn btn-sm btn-outline-secondary">17</a>
        <a href="{% url 'staff:sold_products_date' date='07032022' %}" class="btn btn-sm btn-outline-secondary">16</a>
        <a href="{% url 'staff:sold_products_date' date='06032022' %}" class="btn btn-sm btn-outline-secondary">15</a>
        <a href="{% url 'staff:sold_products_date' date='05032022' %}" class="btn btn-sm btn-outline-secondary">14</a>
        <a href="{% url 'staff:sold_products_date' date='04032022' %}" class="btn btn-sm btn-outline-secondary">13</a>
        <a href="{% url 'staff:sold_products_date' date='03032022' %}" class="btn btn-sm btn-outline-secondary">12</a>
        <a href="{% url 'staff:sold_products_date' date='02032022' %}" class="btn btn-sm btn-outline-secondary">11</a>
        <a href="{% url 'staff:sold_products_date' date='01032022' %}" class="btn btn-sm btn-outline-secondary">10</a>
        <a href="{% url 'staff:sold_products_date' date='28022022' %}" class="btn btn-sm btn-outline-secondary">9</a>
        <a href="{% url 'staff:sold_products_date' date='27022022' %}" class="btn btn-sm btn-outline-secondary">8</a>
        <a href="{% url 'staff:sold_products_date' date='26022022' %}" class="btn btn-sm btn-outline-secondary">7</a>
        <a href="{% url 'staff:sold_products_date' date='25022022' %}" class="btn btn-sm btn-outline-secondary">6</a>
        <a href="{% url 'staff:sold_products_date' date='24022022' %}" class="btn btn-sm btn-outline-secondary">5</a>
        <a href="{% url 'staff:sold_products_date' date='23022022' %}" class="btn btn-sm btn-outline-secondary">4</a>
        <a href="{% url 'staff:sold_products_date' date='22022022' %}" class="btn btn-sm btn-outline-secondary">3</a>
        <a href="{% url 'staff:sold_products_date' date='21022022' %}" class="btn btn-sm btn-outline-secondary">2</a>
        <a href="{% url 'staff:sold_products_date' date='20022022' %}" class="btn btn-sm btn-outline-secondary">1</a>

      </p>
      <table class="table table-striped">
        <thead>
          <th scope="">{% trans 'Product ID' %}</th>
          <th scope="">{% trans 'ISBN' %}</th>
          <th scope="">{% trans 'Flow' %}</th>
          <th scope="">{% trans 'Name' %}</th>
          <th scope="">{% trans 'Quantity' %}</th>
          <th scope="">{% trans 'Status' %}</th>
          <th scope="">{% trans 'Date' %}</th>
          <th scope="">{% trans 'Quantity in stock' %}</th>


        </thead>
        <tbody>
          {% for line, item  in added_line.items %}
          <tr>
            <td>{{ line }}</td>

            <td>{{ item.isbn }}</td>
            <td><a href="{% url 'warehouses:product_workflow' item.id %}"><img src="{% static 'img/proccess.png' %}" alt="product flow"></a></td>
            <td>{{ item.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>
              {% if 'used' in item.variation %}
              <span class="border border-warning p-1 rounded">{% trans 'Used' %}</span>
              {% else %}
              <span class="border border-success p-1 rounded">{% trans 'New' %}</span>
              {% endif %}
            </td>
            <td>{{ item.created }}</td>

            <td><span class="{% if item.stock <= 0 %}bg-warning text-dark p-2 rounded{% endif %}">{{ item.stock }}</span></td>
            {% for item in line %}
            {% endfor %}
            {%comment %}
            {% endcomment%}

          </tr>
          {% endfor %}

        </tbody>
      </table>



    </div>

  </div>
</div>
{% endblock %}
